# JavaScriptåŸºç¡€-replaceæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°

> æœ€è¿‘åˆé‡æ–°çœ‹äº†ä¸‹é«˜ç¨‹4ï¼Œåˆæ˜¯ä¸åŒçš„æ”¶è·ï¼Œå…¶ä¸­å¯¹`replace`æ–¹æ³•å°è±¡è¾ƒæ·±ï¼Œå› ä¸ºä¹‹å‰åšçš„ä¸€ä¸ªå°åŠŸèƒ½å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°å¾ˆè½»æ¾è½»æ¾åœ°å®ç°ï¼Œè¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹ã€‚

## åŸºæœ¬ä½¿ç”¨

ä¸€èˆ¬æ¥è¯´ï¼Œç”¨å¾—æœ€å¤šçš„å¯èƒ½å°±æ˜¯`'some string'.replace(/s/gi, 'target')`è¿™æ ·çš„äº†

å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²`'some string'.replace('s', 'target')`ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆšæ‰æåˆ°çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œæœ‰äººè®¨åŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œè¯´å½“ä½ è®¤ä¸ºè¿™ä¸ªé—®é¢˜å¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è§£å†³çš„æ—¶å€™ï¼Œé‚£ä¹ˆä½ å°±é™·å…¥äº†å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œä¸è¿‡æˆ‘ç¡®æŒºå–œæ¬¢æ­£åˆ™çš„ï¼Œå‡ ä¹æ‰€æœ‰çš„å­—ç¬¦ä¸²å¤„ç†éƒ½å¯ä»¥ç”¨å…¶æ–¹ä¾¿åœ°å¤„ç†ï¼Œè¿™é‡Œåœ°ç¬¬ä¸€ä¸ªå‚æ•°æ²¡ä»€ä¹ˆå¯è®¨è®ºçš„ï¼Œæ¥ä¸‹æ¥å°±ç›´æ¥è®¨è®ºç¬¬äºŒä¸ªå‚æ•°å§ã€‚

ç¬¬äºŒä¸ªå‚æ•°çš„ç¬¬ä¸€ç§ç”¨æ³•å°±æ˜¯åˆšæ‰ä½¿ç”¨çš„ä¹Ÿæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½œç”¨å°±æ˜¯æ›¿æ¢å‚æ•°ä¸€åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚åˆšæ‰çš„è¿è¡Œç»“æœå°±æ˜¯è¿™æ ·ï¼Œå¹³å¸¸è¿™æ ·ä½¿ç”¨ä¹Ÿå®Œå…¨è¶³å¤Ÿäº†ï¼š

![](https://oss.justin3go.com/blogs/Pasted%20image%2020221201164355.png)

å…¶å®ï¼Œç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºå­—ç¬¦ä¸²è¿˜æœ‰ä¸€äº›é«˜é˜¶çš„ç”¨æ³•ï¼Œå°±æ˜¯å­—ç¬¦åºåˆ—ï¼Œåœ¨ä½œä¸ºå­—ç¬¦ä¸²çš„ç¬¬äºŒä¸ªå‚æ•°ä¸­ï¼Œ`$`ç¬¦å·å¼€å¤´çš„æŸäº›ç‰¹æ®Šå­—ç¬¦ä¼šè¢«æ›¿æ¢æˆå…¶å®ƒå­—ç¬¦ï¼ŒMDNä¸Šçš„è¡¨æ ¼æ˜¯è¿™æ ·:

![](https://oss.justin3go.com/blogs/Pasted%20image%2020221201164712.png)
ç¬¬ä¸€ä¸ªå˜é‡å`$$`å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ç”¨æ¥è½¬ä¹‰çš„ï¼Œå½“æˆ‘ä»¬çœŸæ­£æƒ³æ’å…¥ä¸€ä¸ª`$`å­—ç¬¦æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨`$$`æ¥æ ‡è¯†ï¼Œæ¥ä¸‹æ¥åˆ†åˆ«å¯¹ä¸‹é¢é›†ä¸­å˜é‡åè¿›è¡Œå°è¯•ï¼Œéƒ½æ˜¯å¾ˆå¥½ç†è§£çš„ï¼Œçœ‹çœ‹ä»£ç å°±æ‡‚äº†ï¼š

1. `$&`ä¾‹å­ï¼šåŒ¹é…`.com`å­—ç¬¦å¹¶å°†å…¶æ›¿æ¢ä¸º10ä¸ªä¸€æ ·çš„ï¼Œç›¸å½“äºå¢åŠ äº†9ä¸ª`.com`

```js
console.log('justin3go.com'.replace(/\.\w+/g, '$&'.repeat(10)));
```

		justin3go.com.com.com.com.com.com.com.com.com.com

2. ä¸‰å››ä¾‹å­ï¼ˆåŸºæœ¬ä¸€è‡´ï¼‰ï¼šå°†ç›®æ ‡åŒ¹é…å­—ç¬¦ä¸²æ›¿æ¢ä¸ºå…¶å·¦è¾¹æˆ–å³è¾¹éƒ¨åˆ†ï¼Œç›´æ¥çœ‹ä¾‹å­å§:

```js
console.log('justin3go.com'.replace(/\.\w+/g, '$`'));
console.log('justin3go.com/demo'.replace(/\.\w+/g, "$'"));
```

		justin3gojustin3go
		justin3go/demo/demo

3. `$n`ï¼Œç¬¬ä¸€ä¸ªåŒ¹é…çš„ç»„å’Œç¬¬äºŒä¸ªåŒ¹é…çš„ç»„è¿›è¡Œäº¤æ¢

```js
console.log('justin3go.com'.replace(/(\w+)\.(\w+)/g, '$2.$1'));
```

		com.justin3go

## å½“ç¬¬äºŒä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°æ—¶

å›è°ƒå‡½æ•°åœ¨JavaScriptä¸­å¹¿æ³›ä½¿ç”¨ï¼Œå¯¹äºç”¨æˆ·è‡ªå®šä»¥ä¸€äº›åŠŸèƒ½æ¥è¯´ç‰¹åˆ«æœ‰ç”¨ï¼Œæ¯”å¦‚åŸºæœ¬çš„æ•°ç»„è¿­ä»£æ–¹æ³•éƒ½æ˜¯é€šè¿‡å›è°ƒå‡½æ•°è¿›è¡Œå¤„ç†çš„`[1,2,3].map(item => item.toString())`ç­‰ç­‰ï¼Œè¿˜æœ‰æ¯”å¦‚`[2,1,3].sort((a, b) => a-b)`è¿™ç±»

è¿™é‡Œä½¿ç”¨çš„replaceæ–¹æ³•åŒæ ·æ”¯æŒä¼ é€’ä¸€ä¸ªå‡½æ•°è¿›è¡Œè‡ªå®šä¹‰æ“ä½œï¼ŒåŸºæœ¬ç”¨æ³•å¦‚ä¸‹ï¼š

MDNä¸­ä»‹ç»çš„å‚æ•°ä¸ºï¼š

![](https://oss.justin3go.com/blogs/Pasted%20image%2020221201171454.png)
è€Œå‡½æ•°çš„è¿”å›å€¼å°±æ˜¯æ›¿æ¢åçš„å€¼

ä¸¾ä¸ªä¾‹å­ï¼Œè‡ªå®ç°æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹è¾“å…¥:

```js
const tpl = 'æ¬¢è¿å‚è§‚æˆ‘çš„åšå®¢${website}ï¼Œåšå®¢çš„ä½œè€…ä¸º${writer}ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆğŸ˜€'
const var2str = {
	website: 'justin3go.com',
	writer: 'justin3go'
}
```

æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªè½¬æ¢å‡½æ•°å°†`tpl`ä¸­çš„å˜é‡è½¬æ¢ä¸ºæˆ‘ä»¬å¯¹åº”çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼š

```js
const res = renderTpl(tpl, var2str);
```

è¿™æ—¶å€™ç”¨`replace`çš„å›è°ƒå‡½æ•°å°±éå¸¸æ–¹ä¾¿äº†ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š

```js
function renderTpl(tpl, var2str) {
	const res = tpl.replace(/\${\w+\}/gi, (match) => {
		const item = match.substring(2, match.length - 1)
		if(item in var2str)return var2str[item]
		else console.warn(`æœªæ‰¾åˆ°å¯åŒ¹é…çš„æ ‡è¯†ç¬¦: [${item}]`);
	})
	return res
}
console.log(renderTpl(tpl, var2str));
```

		æ¬¢è¿å‚è§‚æˆ‘çš„åšå®¢justin3go.comï¼Œåšå®¢çš„ä½œè€…ä¸ºjustin3goï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆğŸ˜€

## å‚è€ƒ

- ã€ŠJavaScriptã€‹é«˜çº§ç¨‹åºè®¾è®¡ç¬¬4ç‰ˆ
- https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replace
- https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions

