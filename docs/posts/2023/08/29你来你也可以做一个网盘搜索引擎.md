---
title: ä½ æ¥ä½ ä¹Ÿå¯ä»¥åšä¸€ä¸ªç½‘ç›˜æœç´¢å¼•æ“
date: 2023-08-29
tags: 
  - ç½‘ç›˜
  - æœç´¢å¼•æ“
  - Scrapy
  - ElasticSearch
  - NestJS
  - VueJS
  - Docker
---

# ä½ æ¥ä½ ä¹Ÿå¯ä»¥åšä¸€ä¸ªç½‘ç›˜æœç´¢å¼•æ“

> âœ¨æ–‡ç« æ‘˜è¦ï¼ˆAIç”Ÿæˆï¼‰

<!-- DESC SEP -->

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œç¬”è€…åˆ†äº«äº†ä»–åœ¨è¿‡å»ä¸¤å¹´é—´çš„ä¸€ä¸ªå°å‹ç½‘ç›˜æœç´¢å¼•æ“é¡¹ç›®ï¼Œä»¥å¤ä¹ å’Œå®è·µæœç´¢å¼•æ“çš„ç›¸å…³çŸ¥è¯†ã€‚

é¡¹ç›®ä½¿ç”¨äº†å¤šä¸ªæŠ€æœ¯æ ˆï¼ŒåŒ…æ‹¬ Scrapyã€ElasticSearchã€NestJS å’Œ VueJSï¼Œæ•´ä½“æ¶æ„ç›¸å¯¹ç®€åŒ–ã€‚

ç¬”è€…è¯¦ç»†æè¿°äº†çˆ¬è™«çš„å®ç°æ€è·¯ï¼Œä»ç§å­ç½‘ç«™çˆ¬å–ç½‘ç›˜èµ„æºå¹¶ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–é“¾æ¥ï¼Œæœ€ç»ˆå°†æ•°æ®ç´¢å¼•åˆ° ElasticSearch ä¸­ã€‚æ–‡ç« è¿˜æåˆ°åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„ IP ç®¡ç†é—®é¢˜ï¼Œæé†’è¯»è€…æ³¨æ„å®‰å…¨è®¾ç½®ã€‚åç«¯éƒ¨åˆ†æä¾›äº†ç®€å•çš„æœç´¢å’Œå»ºè®®æ¥å£ï¼Œè€Œå‰ç«¯åˆ™ä½¿ç”¨äº†è…¾è®¯çš„ UI åº“ï¼Œæ„å»ºäº†ä¸€ä¸ªç”¨æˆ·å‹å¥½çš„æœç´¢ç•Œé¢ã€‚é¡¹ç›®æ²¡æœ‰å¼€æºçš„è®¡åˆ’ï¼Œå¹¶ä¸”ç¬”è€…è®¤ä¸ºè¿™ä¸ªè¿‡ç¨‹ä¸ºä»–æä¾›äº†å®è´µçš„å®è·µç»éªŒã€‚

<!-- DESC SEP -->

## å‰è¨€

ä¸¤å¹´å‰ç¬”è€…åšè¿‡ä¸€ä¸ªå½“æ—¶éå¸¸æœ‰æˆå°±æ„Ÿçš„å°å‹æœç´¢å¼•æ“ï¼Œä½†å›è¿‡å¤´ä¸€çœ‹ï¼Œå…¨å¿˜å®Œäº†ğŸ™ƒï¼Œä¸ºäº†å¤ä¹ ä¸€ä¸‹ä»¥å‰çš„çŸ¥è¯†ï¼Œå‰é¢å†™è¿‡ä¸€ç¯‡æ–‡ç« æ€»ç»“æ¦‚æ‹¬äº†ä¸€ä¸‹[æœç´¢å¼•æ“çš„åŸç†](https://justin3go.com/%E5%8D%9A%E5%AE%A2/2023/08/17%E6%B5%85%E8%B0%88%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8E%9F%E7%90%86.html)ã€‚ä½†ä½œä¸ºç¨‹åºå‘˜ï¼Œå…‰æ˜¯ç†è®ºè‚¯å®šæ˜¯ä¸å¤Ÿçš„ï¼Œæ‰€ä»¥å¾—å®è·µä¸€ä¸‹ã€‚ä»¥å‰çš„æ–‡ç« æœç´¢å¼•æ“è¯´å®è¯æ²¡å•¥ç”¨ï¼Œæ‰€ä»¥è¿™æ¬¡ä¸ºäº†è®©é¡¹ç›®æ›´åŠ æœ‰æ„æ€ä¸€ç‚¹ï¼Œå†³å®šåšçš„æ˜¯ä¸€ä¸ªç½‘ç›˜ç±»çš„æœç´¢å¼•æ“ï¼Œä¹Ÿç®—æ˜¯æœ‰ç‚¹ç”¨å¤„ã€‚

ç¬”è€…å°†æ•´ä¸ªæœç´¢å¼•æ“ç®€åŒ–äº†å¾ˆå¤šï¼Œç”šè‡³æ¯”ä¸¤å¹´å‰åšçš„é‚£ä¸ªå°å‹æœç´¢å¼•æ“è¿˜è¦ç®€å•ï¼Œä½†ä¹Ÿç®—æ˜¯ä¸€ä¸ªå¾®å‹æœç´¢å¼•æ“äº†ï¼Œå¸®åŠ©ç¬”è€…å®è·µäº†éƒ¨åˆ†çŸ¥è¯†ã€‚

## é¡¹ç›®æ¼”ç¤º

![](https://oss.justin3go.com/blogs/Pasted%20image%2020230829220504.png)

![](https://oss.justin3go.com/blogs/Pasted%20image%2020230829220528.png)

[çº¿ä¸Šæ¼”ç¤ºåœ°å€ï¼špan.justin3go.com](https://pan.justin3go.com/)

è‡³æ–‡ç« å‘å¸ƒ 3 ä¸ªæœˆå†…è¯¥åœ°å€åº”è¯¥éƒ½å¯ä»¥è®¿é—®ã€‚æœåŠ¡å™¨æš‚æ—¶ä¹°äº† 3 ä¸ªæœˆçš„æ”¾åœ¨é‚£é‡Œï¼Œ3 ä¸ªæœˆä¹‹åçœ‹æ˜¯å¦è¿˜æœ‰ç©ºé—²çš„æœåŠ¡å™¨ï¼Œå¦åˆ™åº”è¯¥å°±ä¼šä¸‹çº¿è¯¥æœåŠ¡ã€‚
## æŠ€æœ¯æ¦‚è§ˆ

è®©æˆ‘ä»¬è¿˜æ˜¯å…ˆçœ‹çœ‹ä¹‹å‰[è¿™ç¯‡æ–‡ç« ](https://justin3go.com/%E5%8D%9A%E5%AE%A2/2023/08/17%E6%B5%85%E8%B0%88%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8E%9F%E7%90%86.html)çš„ä¸€ä¸ªæ¶æ„å›¾ï¼š

![](https://oss.justin3go.com/blogs/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E6%9E%B6%E6%9E%84%E5%9B%BE.png)

ç„¶åå…·ä½“æ¥è¯´ç¬”è€…ä½¿ç”¨äº†å¦‚ä¸‹æŠ€æœ¯æ ˆï¼š

1. çˆ¬è™«æ¡†æ¶ï¼š[Scrapy](https://scrapy.org/)
2. ç´¢å¼•å­˜å‚¨/æœç´¢ï¼š[ElasticSearch](https://www.elastic.co/cn/)
3. åç«¯æœåŠ¡ï¼š[NestJS](https://docs.nestjs.com/)
4. å‰ç«¯æœåŠ¡ï¼š[VueJS](https://vuejs.org/guide/introduction.html)
5. éƒ¨ç½²ï¼š[Docker](https://www.docker.com/)

## çˆ¬è™«

æœ¬ç« ä¸ä¼šä»‹ç» Scrapy çš„ä½¿ç”¨ï¼Œåªä¼šå¤§è‡´è®²è®²ç¬”è€…çš„æ€è·¯ï¼Œæ¡†æ¶ä½¿ç”¨è¯·è§[Scrapy å®˜ç½‘](https://scrapy.org/)

1. æ‰¾ä¸€äº›ç§å­ç½‘ç«™ï¼Œæ¯”å¦‚çŸ¥ä¹ã€è´´å§ä¸­ç½‘ç›˜èµ„æºåˆ†äº«çš„åœˆå­
2. çˆ¬å–è¯¥ç½‘é¡µï¼Œæ–‡ç« ç±»æœç´¢å¼•æ“å°±æ˜¯è¯†åˆ«æ ‡é¢˜ã€æ­£æ–‡ä¹‹ç±»çš„ï¼Œè€Œç½‘ç›˜ç±»æœç´¢å¼•æ“æ›´åŠ ç®€å•ï¼Œç›´æ¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¯†åˆ«åŸŸåå°±å¯ä»¥äº†ï¼Œæ¯”å¦‚é˜¿é‡Œäº‘ç›˜çš„æ­£åˆ™å°±æ˜¯`aliyundrive.com/s/[A-Za-z0-9]{11}`
3. å°†æå–çš„å†…å®¹åšå¤„ç†å¹¶ç´¢å¼•åˆ° ElasticSearch ä¹‹ä¸­
4. æå–è¯¥ç½‘é¡µçš„æ‰€æœ‰å¤–é“¾ï¼Œå¹¶è¿‡æ»¤ï¼Œæ¯”å¦‚èµ„æºé“¾æ¥ï¼ˆå›¾ç‰‡ã€è§†é¢‘ã€éŸ³ä¹ï¼‰ä¹‹ç±»ï¼Œç»§ç»­çˆ¬å–è¿™äº›å¤–é“¾ï¼Œé‡å¤è¯¥æ­¥éª¤

è¿™é‡Œç¬”è€…å°†çˆ¬è¡Œæ·±åº¦é™åˆ¶ä¸ºäº† 10ï¼Œå› ä¸ºä¸€èˆ¬ç¦»å¯¼èˆªç½‘ç«™è¶Šè¿œï¼Œè¶Šä¸é‡è¦ï¼Œå°±èŠ‚çœèµ„æºï¼Œä¸çˆ¬å–äº†ã€‚

> python ä»£ç å°±ä¸è´´äº†ï¼Œç¬”è€…å·²ç»å¾ˆä¹…æ²¡å†™è¿‡ python ä»£ç äº†ï¼Œè¿™æ¬¡å†™ python ä»£ç åŸºæœ¬ä¸Šéƒ½æ˜¯è¯´è¯´æ€è·¯ï¼Œç„¶å GPT å¸®åŠ©ç¬”è€…å†™çš„ï¼Œåæ­£æ„Ÿè§‰æŒºçƒ‚çš„ï¼Œä½†æ€»ç®— Debug èƒ½åŠ›è¿˜åœ¨ï¼ŒæŠŠè¿™å †ä»£ç è·‘èµ·æ¥äº†ã€‚

æœ€åéƒ¨ç½²å°±ç”¨äº† node çš„ pm2 å®ˆæŠ¤è¿™ä¸ªçˆ¬è™«è¿›ç¨‹ï¼Œæ”¾åœ¨æœåŠ¡å™¨ä¸Šä¸€ç›´è¿è¡Œå°±è¡Œäº†ã€‚

## ç´¢å¼•

éƒ¨ç½²æ–¹é¢ä½¿ç”¨ Docker è¿›è¡Œéƒ¨ç½²

éƒ¨ç½²æµç¨‹ç¬”è€…åŸºæœ¬ä¸Šéƒ½æ˜¯å‚è€ƒçš„[è¿™ç¯‡æ–‡ç« ](https://juejin.cn/post/7141271047562592264)ï¼Œæ•´ä½“ä¸‹æ¥ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå°±ä¸å†é‡æ–°éƒ¨ç½²æ¼”ç¤ºäº†ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸è¦ä¸ºäº†è´ªå›¾æ–¹ä¾¿ï¼Œä¸è®¾ç½® IP ç™½åå•ï¼Œç¬”è€…å°±æ˜¯å› ä¸ºå®¶é‡Œç½‘ç»œå±äºåŠ¨æ€ IPï¼Œä¸ºäº†æœ¬åœ°å¼€å‘æ–¹ä¾¿ï¼Œå°±æ²¡æœ‰å•ç‹¬è®¾ç½® IP ç™½åå•ï¼Œç»“æœçˆ¬å–äº† 3 å‘¨çš„æ•°æ®å…¨éƒ¨è¢«åˆ é™¤äº†ï¼Œè€Œä¸”è¿˜ä¸é•¿è®°æ€§ï¼Œè¢«åˆ é™¤äº† 2 æ¬¡ï¼š

MDï¼Œæˆ‘çš„ Elasticsearch çš„ç´¢å¼•å…¨è¢«åˆ é™¤äº†ï¼Œä¹‹å‰æƒ³ç€æ²¡äººçŸ¥é“æˆ‘çš„ IP åœ°... `#æ˜é‡‘æ²¸ç‚¹#`
https://juejin.cn/pin/7262761740524372029

å¤ªçŒ–ç‹‚äº†ï¼Œåˆ æˆ‘ ES æ•°æ®åº“ - `#æ˜é‡‘æ²¸ç‚¹#`
https://juejin.cn/pin/7264921613552058402

æ‰€ä»¥è¿™é‡Œè¦ä¹ˆä½¿ç”¨`iptables`å·¥å…·è¿›è¡Œé™åˆ¶ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨äº‘å‚å•†çš„å®‰å…¨ç»„ç­–ç•¥ï¼Œä»…å…è®¸åº”ç”¨æœåŠ¡å™¨çš„ IP è®¿é—®ã€‚

## åº”ç”¨æœåŠ¡

æœ€åå°±æ˜¯åº”ç”¨æœåŠ¡äº†ï¼Œè¿™äº›å°±è½»è½¦ç†Ÿè·¯äº†ã€‚

### åç«¯éƒ¨åˆ†

ä¸ºäº†ç®€å•ï¼Œç¬”è€…è¿™é‡Œåç«¯å°±åªå†™äº†ä¸¤ä¸ªæ¥å£ï¼Œä¸€ä¸ªæ˜¯æœç´¢çš„æ¥å£ï¼Œä¸€ä¸ªæ˜¯æœç´¢å»ºè®®çš„æ¥å£ï¼Œå°±æ˜¯è¾“å…¥å‰åŠæˆªï¼Œæç¤ºååŠæˆªè¿™ç§ã€‚

å¦‚ä¸‹æ˜¯ NestJS ä¸­`service`éƒ¨åˆ†ï¼š

```ts
import { Injectable } from '@nestjs/common';
import { ElasticsearchService } from '@nestjs/elasticsearch';
import { SearchDto } from './dto/search.dto';
import { SuggestDto } from './dto/suggest.dto';

@Injectable()
export class SearchService {
  constructor(private readonly elasticsearchService: ElasticsearchService) {}

  async search(data: SearchDto) {
    const { pageNo, pageSize, query } = data;
    const esRes = await this.elasticsearchService.search({
      index: 'pan',
      body: {
        from: (pageNo - 1) * pageSize, // ä»å“ªé‡Œå¼€å§‹
        size: pageSize, // æŸ¥è¯¢æ¡æ•°
        query: {
          match: {
            title: query, // æœç´¢æŸ¥è¯¢åˆ°çš„å†…å®¹
          },
        },
        highlight: {
          pre_tags: ["<span class='highlight'>"],
          post_tags: ['</span>'],
          fields: {
            title: {},
          },
          fragment_size: 40,
        },
      },
    });
    // ç»„è£…å‚æ•°
    const finalRes = {
      took: esRes.body.took,
      total: esRes.body.hits.total.value,
      data: esRes.body.hits?.hits.map((item: any) => ({
        title: item._source.title,
        pan_url: item._source.pan_url,
        extract_code: item._source.extract_code,
        highlight: item.highlight,
      })),
    };
    return finalRes;
  }

  async suggest(data: SuggestDto) {
    const { input } = data;
    const esRes = await this.elasticsearchService.search({
      index: 'pan',
      suggest_field: 'suggest',
      suggest_mode: 'always',
      suggest_size: 20,
      suggest_text: input,
    });
    return esRes.body.suggest;
  }
}
```

éå¸¸å°‘ï¼Œåç«¯æœåŠ¡åŸºæœ¬ä¸Šå°±åªå†™ä¸Šé¢è¿™å‡ è¡Œä»£ç ï¼Œå•¥ç”¨æˆ·ç³»ç»Ÿã€å®‰å…¨é™åˆ¶éƒ½æ²¡åšã€‚æ²¡å¿…è¦ï¼Œåªæ˜¯ä¸ºäº†æ¼”ç¤ºï¼Œå…ˆåšä¸»è¦åŠŸèƒ½ï¼Œå¦‚æœæœ‰éœ€è¦å†è¿­ä»£å°±è¡Œäº†ï¼Œå¤šåŠä¹Ÿä¸ä¼šç»§ç»­å¼€å‘äº†ã€‚

### å‰ç«¯éƒ¨åˆ†

æ•´ä¸ªå‰ç«¯é¡µé¢å°±åªæœ‰ä¸€ä¸ªé¡µé¢ï¼Œä¹Ÿéå¸¸ç®€å•ï¼Œç¨å¾®éº»çƒ¦ä¸€ç‚¹çš„å°±æ˜¯å…¼å®¹äº†ä¸€ä¸‹ç§»åŠ¨ç«¯æ˜¾ç¤ºï¼ŒUI åº“ä½¿ç”¨çš„æ˜¯è…¾è®¯çš„ UI åº“-[TDesign](https://tdesign.tencent.com/vue-next/components/table)ï¼Œæ„Ÿè§‰è¿˜æŒºå¥½çœ‹çš„ï¼Œå…¶ä»–å°±æ²¡å•¥ç‰¹åˆ«çš„äº†ï¼Œå¦‚ä¸‹æ˜¯é‚£ä¸ªä¸»é¡µé¢çš„å…·ä½“ä»£ç ï¼š

`template`éƒ¨åˆ†ï¼š

```html
<template>
  <header>
    <div class="title">é˜¿é‡Œäº‘ç›˜æœç´¢ç¥å™¨</div>
    <div class="slogan">
      äº’è”ç½‘å…·æœ‰å¤©ç„¶çš„èµ„æºå…±äº«æ€§ï¼Œæœ¬å°ç«™ä¸æ˜¯èµ„æºçš„ç”Ÿäº§è€…ï¼Œä¸å­˜å‚¨ä»»ä½•èµ„æºï¼Œä»…ä»…åªæ˜¯äº’è”ç½‘çš„æ¬è¿å·¥
    </div>
  </header>
  <main>
    <div class="search-input">
      <t-auto-complete
        v-model="searchValue"
        :options="options"
        placeholder="è¯·è¾“å…¥å…³é”®è¯æœç´¢"
        size="large"
        highlight-keyword
        filterable
        class="t-demo-autocomplete__search"
        @change="loadSuggest"
        @enter="searchData"
        @select="searchData"
      >
        <template v-if="searchValue" #suffix>
          <CloseCircleFilledIcon class="t-input__suffix-clear" @click="searchValue = ''" />
        </template>
        <template #suffixIcon>
          <t-button shape="square" size="large" @click="searchData"><SearchIcon /></t-button>
        </template>
      </t-auto-complete>
    </div>
    <t-loading size="small" :loading="loading" show-overlay style="width: 100%; height: 100%">
      <div class="list-container">
        <t-list :split="true">
          <t-list-item v-for="(item, index) in searchResult" :key="index">
            <t-list-item-meta :description="`æå–ç : ${item.extractCode || '--'}`">
              <template #title>
                <div class="result-title" v-html="item.highlight.title[0]"></div>
              </template>
            </t-list-item-meta>
            <template #action>
              <t-link
                theme="primary"
                hover="#000000"
                style="margin-left: 16px"
                @click="copyCode(item.extractCode)"
              >
                å¤åˆ¶æå–ç 
              </t-link>
              <t-link
                theme="primary"
                hover="#000000"
                style="margin-left: 16px"
                @click="openAdDialog(item.pan_url)"
              >
                è·³è½¬
              </t-link>
            </template>
          </t-list-item>
        </t-list>
        <div v-if="!searchResult.length" class="empty-container">
          <div class="empty">
            <!-- <WalletIcon size="80px" /> -->
            <img src="@/assets/empty.png" alt="" style="width: 240px; opacity: 0.5" />
            <div class="text">è¯·è¾“å…¥æœç´¢æˆ–æš‚æ— æ•°æ®</div>
          </div>
        </div>
      </div>
    </t-loading>
    <div v-if="page.total" class="pagination-container">
      <t-pagination
        v-model="page.NO"
        v-model:pageSize="page.size"
        :total="page.total"
        :showPreviousAndNextBtn="false"
        page-ellipsis-mode="both-ends"
        @page-size-change="onPageSizeChange"
        @current-change="onCurrentChange"
      />
    </div>
  </main>
  <footer></footer>
  <t-dialog
    v-model:visible="visible"
    header="è¯·è®¤çœŸé˜…è¯»ä»¥ä¸‹å£°æ˜"
    confirmBtn="åŒæ„å£°æ˜å¹¶è·³è½¬"
    @confirm="jumpLink"
    @close="closeAdDialog"
  >
    <p class="content">
      1.
      æœ¬ç«™é“¾æ¥ä¸ºç¨‹åºè‡ªåŠ¨æ”¶é›†è‡ªäº’è”ç½‘ï¼Œä¸å‚¨å­˜ã€å¤åˆ¶ã€ä¼ æ’­ã€æ§åˆ¶ç¼–è¾‘ä»»ä½•ç½‘ç›˜æ–‡ä»¶ï¼Œä¸æä¾›ä¸‹è½½æœåŠ¡ï¼Œé“¾æ¥è·³è½¬è‡³å®˜æ–¹ç½‘ç›˜ï¼Œæ–‡ä»¶çš„æœ‰æ•ˆæ€§å’Œå®‰å…¨æ€§éœ€è¦æ‚¨è‡ªè¡Œåˆ¤æ–­ã€‚
    </p>
    <p class="content">
      2. æœ¬ç«™åšå†³æœç»ä¸€åˆ‡è¿è§„ä¸è‰¯ä¿¡æ¯ï¼Œå¦‚æ‚¨å‘ç°ä»»ä½•æ¶‰å«Œè¿è§„çš„ç½‘ç›˜ä¿¡æ¯ï¼Œè¯·ç«‹å³å‘<a
        href="https://terms.alicdn.com/legal-agreement/terms/suit_bu1_dingtalk/suit_bu1_dingtalk202103181300_11832.html"
        >ç½‘ç›˜å®˜æ–¹ç½‘ç«™</a
      >ä¸¾æŠ¥
    </p>
    <p class="content">
      3. æœ¬ç«™æ˜¯ç¬”è€…åœ¨çº¿ä½œå“æ¼”ç¤ºç½‘ç«™ï¼Œæ‰€æœ‰æœåŠ¡ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œæœç´¢å¼•æ“æŠ€æœ¯ç»†èŠ‚å¯ä»¥è®¿é—®ç¬”è€…çš„<a
        href="https://justin3go.com"
        >ä¸ªäººåšå®¢</a
      >æŸ¥æ‰¾ã€‚
    </p>
  </t-dialog>
</template>
```

`script`éƒ¨åˆ†

```html
<script setup lang="ts">
import { reactive, ref, type Ref } from 'vue'
import { SearchIcon, CloseCircleFilledIcon } from 'tdesign-icons-vue-next'
import { MessagePlugin } from 'tdesign-vue-next'
import searchApi from '@/service/apis/search'
import useClipboard from 'vue-clipboard3'

const searchValue = ref('')
const options = ref([])

interface ISearchResultItem {
  title: string
  pan_url: string
  extractCode: string
  highlight: {
    title: string[]
  }
}

const searchResult: Ref<ISearchResultItem[]> = ref([])

const page = reactive({
  total: 0,
  NO: 1,
  size: 10
})

const loading = ref(false)

async function loadData() {
  if (loading.value) return
  loading.value = true
  const data = await searchApi.search({
    pageNo: page.NO,
    pageSize: page.size,
    query: searchValue.value
  })
  searchResult.value = data?.data?.data || []
  page.total = data?.data?.total || 0
  loading.value = false
}

function resetPage() {
  page.total = 0
  page.NO = 1
}

async function searchData() {
  resetPage()
  loadData()
}

const timer = ref()
function loadSuggest() {
  clearTimeout(timer.value)
  timer.value = setTimeout(async () => {
    const data = await searchApi.suggest({
      input: searchValue.value
    })
    const resOptions = data?.data?.suggest[0]?.options
    // eslint-disable-next-line no-control-regex
    options.value = resOptions?.map((item: any) => item.text.replace(/\u001f/g, '')) || []
  }, 200)
}

function onPageSizeChange(size: number) {
  page.size = size
  loadData()
}

function onCurrentChange(index: number) {
  page.NO = index
  loadData()
  MessagePlugin.success(`è½¬åˆ°ç¬¬${index}é¡µ`)
}

async function copyCode(code: string) {
  if (!code) {
    MessagePlugin.info('æ— éœ€æå–ç ')
  }
  const { toClipboard } = useClipboard()
  await toClipboard(code)
  MessagePlugin.success('å¤åˆ¶æˆåŠŸ')
}

const visible = ref(false)
const curPanUrl = ref('')
function openAdDialog(url: string) {
  visible.value = true
  curPanUrl.value = url
}

function closeAdDialog() {
  visible.value = false
}

function jumpLink() {
  let url = curPanUrl.value
  if (!url.startsWith('https://')) url = 'https://' + url
  window.open(url, '_blank')
}
</script>
```

`css`éƒ¨åˆ†

```scss
<style lang="scss" scoped>
header {
  margin-top: 20px;
  padding: 0 100px;
  .title {
    font-size: 32px;
    font-weight: 900;
    text-align: center;
  }
  .slogan {
    text-align: center;
    color: #888888;
    margin-top: 10px;
    max-width: 80vw;

    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
  .slogan::before {
    content: 'â€œ';
    font-size: 40px;
    vertical-align: text-bottom;
    line-height: 20px;
  }
  .slogan::after {
    content: 'â€';
    font-size: 40px;
    vertical-align: text-top;
    /* line-height: 20px; */
  }
  /* ç§»åŠ¨ç«¯æ ·å¼é€‚é… */
  @media (max-width: 1024px) {
    padding: 0;
    .slogan {
      max-width: 100vw;
    }
  }
}
:deep(.t-demo-autocomplete__search .t-input) {
  padding-right: 0;
}
:deep(.t-demo-auto-complete__base .t-button svg) {
  font-size: 20px;
}

main {
  position: relative;
  top: 0;
  .search-input {
    margin: 0 20%;
    width: 60%;
  }
  .list-container {
    margin: 20px 10% 50px 10%;
    width: 80%;
    height: calc(100vh - 250px);
    overflow-y: scroll;
    .empty-container {
      color: #bfbfbf;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      .empty {
        .text {
          width: 240px;
          text-align: center;
        }
      }
    }
  }
  .list-container::-webkit-scrollbar {
    width: 8px;
  }
  .list-container::-webkit-scrollbar-track {
    /* background: rgb(239, 239, 239); */
    border-radius: 2px;
  }
  .list-container::-webkit-scrollbar-thumb {
    background: #bfbfbf;
    border-radius: 10px;
  }
  .list-container::-webkit-scrollbar-thumb:hover {
    background: #a7a7a7;
  }

  .pagination-container {
    position: absolute;
    bottom: -50px;
    margin: 0 5%;
    width: 90%;
    background-color: #ffffff;
  }
  /* ç§»åŠ¨ç«¯æ ·å¼é€‚é… */
  @media (max-width: 1024px) {
    padding: 0 20px;
    .search-input {
      margin: auto;
      width: calc(100vw - 40px);
    }
    .list-container {
      margin: 20px auto 50px auto;
      width: calc(100vw - 40px);
    }
    .pagination-container {
      width: calc(100% - 40px);
      margin: auto;
    }
  }
}
:deep(.highlight) {
  /* color: rgb(172, 141, 0); */
  color: rgb(138, 138, 230);
  /* font-weight: bolder; */
}

:deep(.t-dialog) {
  max-width: 360px;
}
</style>
```

è¿˜æœ‰ä¸€äº›å…¶ä»–é›¶ç¢çš„ä»£ç å°±ä¸è´´äº†ï¼Œä¸»è¦é¡µé¢å°±æ˜¯ä¸Šè¿°éƒ¨åˆ†ã€‚

## æœ€å

æ•´ä½“å¼€å‘ä¸‹æ¥ä¸€ä¸ªæ„Ÿå—å°±æ˜¯ï¼šç”±äºäººä¸ºç®€åŒ–äº†å¾ˆå¤šï¼Œæ‰€ä»¥æ¯ä¸€éƒ¨åˆ†ï¼Œæ¯”å¦‚å‰ç«¯ã€åç«¯ã€çˆ¬è™«ã€éƒ¨ç½²ä¹‹ç±»çš„å•ç‹¬çœ‹éƒ½éå¸¸ç®€å•ï¼Œä½†æ•´ä¸ªæµç¨‹èµ°ä¸‹æ¥å´æ˜¯è¾ƒä¸ºå¤æ‚çš„ï¼Œæ¯”å¦‚é‡åˆ° BUG æ’æŸ¥å°±ä¼šè¾ƒä¸ºè€—æ—¶ã€‚

é¡¹ç›®åº”è¯¥ä¸ä¼šå¼€æºï¼Œä¹Ÿæ²¡å¼€æºçš„å¿…è¦ï¼Œæ¯•ç«Ÿä»£ç æ²¡æ€ä¹ˆæ•´ç†ï¼Œæ¯”å¦‚å‰ç«¯é¡¹ç›®ç”¨è„šæ‰‹æ¶åˆ›å»ºçš„`AboutView.vue`ç¬”è€…éƒ½æ²¡åˆ é™¤ã€‚





